[gd_scene load_steps=6 format=4 uid="uid://template_town_map"]

[ext_resource type="TileSet" uid="uid://dsgco58wfm80c" path="res://mods/_base_game/tilesets/terrain_placeholder.tres" id="1_tileset"]
[ext_resource type="Script" path="res://mods/_template/maps/town_map_template.gd" id="2_town_script"]
[ext_resource type="Script" uid="uid://iijt33alqt3j" path="res://scenes/map_exploration/map_camera.gd" id="3_camera"]
[ext_resource type="Script" uid="uid://cvr41yel2uyjd" path="res://core/components/spawn_point.gd" id="4_spawn"]
[ext_resource type="PackedScene" uid="uid://door_trigger_base" path="res://mods/_base_game/triggers/door_trigger.tscn" id="5_door"]

[node name="TownMapTemplate" type="Node2D"]
script = ExtResource("2_town_script")
town_name = "Example Town"

[node name="TileMapLayer" type="TileMapLayer" parent="."]
tile_set = ExtResource("1_tileset")
tile_map_data = PackedByteArray("AAAAAAEAAAAAAAAAAAABAAEAAAAAAAAAAAACAAEAAAAAAAAAAAADAAEAAAAAAAAAAAAEAAEAAAAAAAAAAAAFAAEAAAAAAAAAAAAGAAEAAAAAAAAAAAAHAAEAAAAAAAAAAAAIAAEAAAAAAAAAAAAJAAEAAAAAAAAAAAAKAAEAAAAAAAAAAAALAAEAAAAAAAAAAAAMAAEAAAAAAAAAAAANAAEAAAAAAAAAAAAOAAEAAAAAAAAAAAAPAAEAAAAAAAAAAAAQAAEAAAAAAAAAAAARAAEAAAAAAAAAAAASAAEAAAAAAAAAAAATAAEAAAAAAAAAAAAUAAEAAAAAAAAAAAAVAAEAAAAAAAAAAAAWAAEAAAAAAAAAAAAXAAEAAAAAAAAAAAAYAAEAAAAAAAAAAAAZAAEAAAAAAAAAAAAaAAEAAAAAAAAAAAAbAAEAAAAAAAAAAAAcAAEAAAAAAAAAAAAdAAEAAAAAAAAAAAAeAAEAAAAAAAAAAAAfAAEAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAEAAgAAAAAAAAAAAAIAAgAAAAAAAAAAAAMAAgAAAAAAAAAAAAQAAgAAAAAAAAAAAAUAAgAAAAAAAAAAAAYAAgAAAAAAAAAAAAcAAgAAAAAAAAAAAAgAAgAAAAAAAAAAAAkAAgAAAAAAAAAAAAoAAgAAAAAAAAAAAAsAAgAAAAAAAAAAAAwAAgAAAAAAAAAAAA0AAgAAAAAAAAAAAA4AAgAAAAAAAAAAAA8AAgAAAAAAAAAAABAAAgAAAAAAAAAAABEAAgAAAAAAAAAAABIAAgAAAAAAAAAAABMAAgAAAAAAAAAAABQAAgAAAAAAAAAAABUAAgAAAAAAAAAAABYAAgAAAAAAAAAAABcAAgAAAAAAAAAAABgAAgAAAAAAAAAAABkAAgAAAAAAAAAAABoAAgAAAAAAAAAAABsAAgAAAAAAAAAAABwAAgAAAAAAAAAAAB0AAgAAAAAAAAAAAB4AAgAAAAAAAAAAAB8AAgAAAAAAAAAAAAAAAwAAAAAAAAAAAAEAAwAAAAAAAAAAAAIAAwAAAAAAAAAAAAMAAwAAAAAAAAAAAAQAAwAAAAAAAAAAAAUAAwAAAAAAAAAAAAYAAwAAAAAAAAAAAAcAAwAAAAAAAAAAAAgAAwAAAAAAAAAAAAkAAwAAAAAAAAAAAAoAAwAAAAAAAAAAAAsAAwAAAAAAAAAAAAwAAwAAAAAAAAAAAA0AAwAAAAAAAAAAAA4AAwAAAAAAAAAAAA8AAwAAAAAAAAAAABAAAwAAAAAAAAAAABEAAwAAAAAAAAAAABIAAwAAAAAAAAAAABMAAwAAAAAAAAAAABQAAwAAAAAAAAAAABUAAwAAAAAAAAAAABYAAwAAAAAAAAAAABcAAwAAAAAAAAAAABgAAwAAAAAAAAAAABkAAwAAAAAAAAAAABoAAwAAAAAAAAAAABsAAwAAAAAAAAAAABwAAwAAAAAAAAAAAB0AAwAAAAAAAAAAAB4AAwAAAAAAAAAAAB8AAwAAAAAAAAAAAAAABAAAAAAAAAAAAAEABAAAAAAAAAAAAAIABAAAAAAAAAAAAAMABAAAAAAAAAAAAAQABAAAAAAAAAAAAAUABAAAAAAAAAAAAAYABAAAAAAAAAAAAAcABAAAAAAAAAAAAAgABAAAAAAAAAAAAAkABAAAAAAAAAAAAAoABAAAAAAAAAAAAAoABQAAAAAAAAAAAAsABAAAAAAAAAAAAAsABQAAAAAAAAAAAAwABAAAAAAAAAAAAAwABQAAAAAAAAAAAA0ABAAAAAAAAAAAAAAA")

[node name="SpawnPoints" type="Node2D" parent="."]

[node name="DefaultStart" type="Marker2D" parent="SpawnPoints"]
position = Vector2(176, 176)
script = ExtResource("4_spawn")
spawn_id = "default_start"
is_default = true
description = "Default starting position when no specific spawn is requested"

[node name="FromOverworld" type="Marker2D" parent="SpawnPoints"]
position = Vector2(176, 352)
script = ExtResource("4_spawn")
spawn_id = "from_overworld"
facing = "up"
description = "Spawn point when entering from the overworld (south gate)"

[node name="FromCastle" type="Marker2D" parent="SpawnPoints"]
position = Vector2(176, 48)
script = ExtResource("4_spawn")
spawn_id = "from_castle"
facing = "down"
description = "Spawn point when exiting the castle (north)"

[node name="Followers" type="Node2D" parent="."]

[node name="MapCamera" type="Camera2D" parent="."]
position = Vector2(176, 176)
script = ExtResource("3_camera")

[node name="Triggers" type="Node2D" parent="."]

[node name="SouthGateDoor" parent="Triggers" instance=ExtResource("5_door")]
position = Vector2(176, 368)
trigger_id = "south_gate_door"
trigger_data = {
"destination_scene": "res://mods/my_mod/maps/overworld.tscn",
"spawn_point": "from_town"
}

[node name="CastleDoor" parent="Triggers" instance=ExtResource("5_door")]
position = Vector2(176, 32)
trigger_id = "castle_door"
trigger_data = {
"destination_scene": "res://mods/my_mod/maps/castle_interior.tscn",
"spawn_point": "entrance"
}
